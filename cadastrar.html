<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Cadastrar Questão</title>

<link rel="icon" type="image/png" href="imagem.png">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
* {
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;

  background: radial-gradient(
    circle at top left,
    #ffffff 0%,
    #f7f3ed 50%,
    #e6dac8 100%
  );

  color: #000;
}

/* CONTAINER */
.container {
  width: 100%;
  max-width: 600px;
  padding: 36px;
}

/* TÍTULO */
h1 {
  text-align: center;
  margin-bottom: 28px;
  font-size: 28px;
  font-weight: 700;
  color: #000;
}

/* CARD */
.card {
  background: linear-gradient(
    160deg,
    rgba(255,255,255,0.9),
    rgba(255,255,255,0.75)
  );

  border-radius: 22px;
  padding: 26px;

  border: 1px solid rgba(218,149,0,0.35);

  box-shadow:
    0 30px 60px rgba(0,0,0,0.35),
    inset 0 0 0 1px rgba(255,255,255,0.4);

  backdrop-filter: blur(14px);
}

/* INPUTS E SELECTS */
input,
textarea,
select {
  width: 100%;
  padding: 14px 18px;
  margin-bottom: 16px;

  border-radius: 16px;
  border: 1px solid rgba(0,0,0,0.2);

  background: rgba(0,0,0,0.75);
  color: #ffffff;

  font-size: 14px;
  outline: none;

  transition: all 0.25s ease;
}

input::placeholder,
textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

input:focus,
textarea:focus,
select:focus {
  border-color: #da9500;
  box-shadow:
    0 0 0 3px rgba(218,149,0,0.4),
    0 12px 30px rgba(0,0,0,0.4);
}

/* TEXTAREA */
textarea {
  resize: vertical;
  min-height: 100px;
}

/* SELECT */
select {
  appearance: none;
  cursor: pointer;

  background-image:
    linear-gradient(
      160deg,
      rgba(0,0,0,0.75),
      rgba(0,0,0,0.75)
    ),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='white'><path d='M7 10l5 5 5-5z'/></svg>");

  background-repeat: no-repeat;
  background-position: right 16px center;
  background-size: auto, 16px;
}

select:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* BOTÃO */
button {
  width: 100%;
  padding: 14px;
  margin-top: 8px;

  border-radius: 16px;
  border: none;

  background: linear-gradient(135deg, #da9500, #8e6320);
  color: #000;

  font-weight: 700;
  font-size: 15px;
  cursor: pointer;

  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
  transition: all 0.2s ease;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 18px 40px rgba(0,0,0,0.6);
}

/* MENSAGEM */
.msg {
  margin-top: 14px;
  text-align: center;
  font-weight: 600;
}

/* LOGO FLUTUANTE */
.floating-logo {
  position: fixed;
  bottom: 24px;
  right: 24px;

  width: 68px;
  height: 68px;

  border-radius: 50%;
  object-fit: cover;

  background: #ffffff;
  padding: 4px;

  box-shadow:
    0 12px 30px rgba(0,0,0,0.6),
    0 0 0 4px rgba(218,149,0,0.6);

  z-index: 999;
}

</style>
</head>

<body>

<img src="imagem.png" alt="Logo" class="floating-logo">

<div class="container" id="app">
  <h1>Cadastrar Questão</h1>

  <div class="card">
    <form id="form">

      <select id="materia" required>
        <option value="">Escolha a matéria</option>
        <option value="Matemática">Matemática</option>
        <option value="Português">Português</option>
        <option value="Inglês">Inglês</option>
        <option value="Física">Física</option>
        <option value="Química">Química</option>
        <option value="Biologia">Biologia</option>
      </select>

      <select id="area" disabled>
        <option value="">Escolha a área</option>
      </select>

      <select id="assunto" disabled>
        <option value="">Escolha o assunto</option>
      </select>

      <textarea id="enunciado" placeholder="Enunciado da questão" required></textarea>

      <input id="a" placeholder="Alternativa A" required>
      <input id="b" placeholder="Alternativa B" required>
      <input id="c" placeholder="Alternativa C" required>
      <input id="d" placeholder="Alternativa D" required>
      <input id="e" placeholder="Alternativa E" required>

      <input id="correta" placeholder="Correta (A, B, C, D ou E)" maxlength="1" required>

      <button type="submit">Salvar questão</button>
      <div class="msg" id="msg"></div>

    </form>
  </div>
</div>

<script>
const supabaseClient = supabase.createClient(
  'https://nuesjdwidvooinsphpul.supabase.co',
  'sb_publishable_lxV_9j0p3amnBOBfL_Kidw_kVALeqkB'
)

const materia = document.getElementById('materia')
const area = document.getElementById('area')
const assunto = document.getElementById('assunto')
const msg = document.getElementById('msg')

const materiasMap = {
  "Matemática": { areas: ["Aritmética","Álgebra","Geometria"], assuntos: { "Aritmética": ["Porcentagem","Regra de três"], "Álgebra": ["Equações"], "Geometria": ["Ângulos"] } },
  "Português": { areas: ["Ortografia","Sintaxe"], assuntos: { "Ortografia": ["Acentuação"], "Sintaxe": ["Concordância"] } },
  "Inglês": { areas: ["Grammar"], assuntos: { "Grammar": ["Verb to be"] } },
  "Física": { areas: ["Cinemática"], assuntos: { "Cinemática": ["MRU"] } },
  "Química": { areas: ["Química Geral"], assuntos: { "Química Geral": ["Átomo"] } },
  "Biologia": { areas: ["Citologia"], assuntos: { "Citologia": ["Célula"] } }
}

function resetSelect(sel, text) {
  sel.innerHTML = `<option value="">${text}</option>`
  sel.disabled = true
}

materia.addEventListener('change', () => {
  resetSelect(area, 'Escolha a área')
  resetSelect(assunto, 'Escolha o assunto')

  if (!materia.value) return

  area.disabled = false
  materiasMap[materia.value].areas.forEach(a => {
    area.innerHTML += `<option value="${a}">${a}</option>`
  })
})

area.addEventListener('change', () => {
  resetSelect(assunto, 'Escolha o assunto')
  if (!area.value) return

  assunto.disabled = false
  materiasMap[materia.value].assuntos[area.value].forEach(a => {
    assunto.innerHTML += `<option value="${a}">${a}</option>`
  })
})

document.getElementById('form').addEventListener('submit', async e => {
  e.preventDefault()

  const correta = document.getElementById('correta').value.toUpperCase()
  if (!['A','B','C','D','E'].includes(correta)) {
    msg.style.color = '#ef4444'
    msg.innerText = 'A alternativa correta deve ser A, B, C, D ou E.'
    return
  }

  const { error } = await supabaseClient.from('questoes').insert({
    materia: materia.value,
    area: area.value,
    assunto: assunto.value,
    enunciado: enunciado.value,
    alternativa_a: a.value,
    alternativa_b: b.value,
    alternativa_c: c.value,
    alternativa_d: d.value,
    alternativa_e: e.value,
    correta
  })

  if (error) {
    msg.style.color = '#ef4444'
    msg.innerText = 'Erro ao salvar questão.'
    return
  }

  msg.style.color = '#16a34a'
  msg.innerText = 'Questão cadastrada com sucesso!'
  document.getElementById('form').reset()
  resetSelect(area, 'Escolha a área')
  resetSelect(assunto, 'Escolha o assunto')
})

</script>

</body>
</html>



